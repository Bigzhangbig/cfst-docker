# 规范：docker_gist_oneshot

此轨道旨在创建一个 Docker 镜像，该镜像在启动时执行单次 Cloudflare 测速，并将结果自动上传到指定的 GitHub Gist。

## 1. 概述
- **目标：** 实现测速并自动备份结果到 Gist。
- **触发方式：** 容器启动即运行，运行结束即退出（One-shot）。
- **核心组件：** CloudflareSpeedTest 二进制文件、Shell 包装脚本。

## 2. 功能需求
- **测速执行：** 
  - 调用 `CloudflareSpeedTest` 进行测速。
  - 支持通过环境变量自定义参数，未提供则使用默认值。
- **结果处理：**
  - 测速完成后，提取核心结果并上传到 GitHub Gist。
  - 使用环境变量 `GIST_TOKEN` 和 `GIST_ID` 进行认证。
  - 成功上传后，输出 Gist 的访问链接。
- **日志记录与输出：**
  - **多路输出：** 日志必须同时输出到控制台 (stdout) 和本地 `.log` 文件。
  - **日志级别：** 使用不同的日志级别（INFO, WARN, ERROR）标识。
  - **自动清理：** 每次运行开始时，自动清空旧的 `.log` 文件，确保日志文件仅包含当前运行的信息。
  - **结果摘要：** 在日志中打印测速结果的简要摘要。

## 3. 非功能需求
- **易用性：** 支持使用 `.env` 文件管理环境变量。
- **轻量化：** 镜像尽可能小（建议 Alpine）。

## 4. 验收标准
- [ ] 容器能够成功上传结果到 Gist。
- [ ] 日志同时出现在控制台和指定的 `.log` 文件中。
- [ ] 再次运行容器时，旧的 `.log` 文件内容被成功清空。
- [ ] 日志中包含清晰的级别标识和 Gist 链接。

## 5. 范围之外
- **定时任务：** 不包含内部 Cron 实现。
